<?xml version="1.0" encoding="utf-8"?>


<xml>

	<synopsis description="" keywords="" generate="0" name="RoboThon 2006" />


		<h1>
			Adventures in NoneLab, scripting outside the box
		</h1>
		
		
				<img id="smallforprint" src="http://letterror.com/code/robofab/img/ondrawmodel_17.gif" width="140" height="96"/>


		<p>

Working with text sources UFO, and GLIF's. Fontlab export and import of UFO. Processing UFO's outside FontLab.
		</p>
	
	
	
		<p>Previous: <a href="talks/robofab_session6.html">Scripting for production</a>, next: <a href="talks/dialogkit.html">Dialog Kit</a>
		</p>


	<h2>UFO</h2>
	<p>

Scripting a font editor without the font editor? 
RoboFab can export and import to the text based <a href="http://letterror.com/code/robofab/ufo/index.html" class="reference" target="docs">UFO format</a> for font sources. You can export a FontLab font to .ufo, and you can import a .ufo to FontLab easily. Read the <a href="http://letterror.com/code/robofab/howto/makeufo.html" class="reference" target="docs">how-to</a>. UFO export and import scripts are available from the RoboFab Scripts menu. But what do you do with ufos then?
	</p>
	
	<h2>Scripting with fonts outside FontLab</h2>
<p>
The nice thing about UFO is that RoboFab can read the files even when it is not running in FontLab. The Python interpreter that you use for FontLab, can run RoboFab scripts and apply them to font and glyphs stored in a UFO rather than a .vfb. That opens possibilities for batch processing, storage in databases or version management systems, archiving or connecting your own tools to your workflow. FontLab specific functionality, such as generating font binaries, and complex path manipulations are not available in the <strong>NoneLab</strong> RoboFab, but you can make fonts, create and move glyphs, generate and manipulate kerning. We've taken great care to make sure that RoboFab based scripts work in both worlds.
</p>
	
<h2>NoneLab</h2>
<p>
NoneLab is a word we coined to describe Robofab/Python environments outside FontLab. Let's have a look at main the differences.

<table>

<thead>

<tr>

<td>

</td>



<td>
FontLab
</td>

<td>
NoneLab
</td>


</tr>
</thead>


<tr>



	<td class="item">
Font binary generation
</td>


<td>
All formats. Import, export UFO.
</td>

<td>

Read, write UFO. Read TT, OTF, PS T1 (through fontTools). Experimental support for SVG fonts.

</td>

</tr>





<tr>
	<td class="item">
	CurrentFont, CurrentGlyph, AllFonts
	</td>


	<td>
	Yes
	</td>


	<td>
	No. Use OpenFont(aPathToUFO) instead, or open the .ufo fonts with RFont(aPathToUFO)
	</td>


</tr>



<tr>
	<td class="item">
	Interpolation
	</td>


	<td>
	Yes
	</td>


	<td>
	Yes - quite a bit faster too.
	</td>


</tr>



<tr>
	<td class="item">
	Make new fonts, move glyphs, merge, split files
	</td>


	<td>
	Yes
	</td>


	<td>
	Yes
	</td>


</tr>



<tr>
	<td class="item">
	Build accented glyphs
	</td>


	<td>
	Yes
	</td>


	<td>
	Yes
	</td>


</tr>

<tr>
	<td class="item">
	Manipulate kerning
	</td>


	<td>
	Yes
	</td>


	<td>
	Yes
	</td>


</tr>




<tr>
	<td class="item">
	Remove overlap
	</td>


	<td>
	Yes
	</td>


	<td>
	No
	</td>


</tr>





<tr>
	<td class="item">
	API
	</td>


	<td>
	All Robofab objects. Plus the underlying FontLab objects.
	</td>


	<td>
	All Robofab objects.
	</td>


</tr>






<tr>
	<td class="item">
	Platform
	</td>


	<td>
	Mac OSX, Windows, within FontLab
	</td>


	<td>
	All platforms which support Python, Mac OSX, Windows, Linux, Unix
	</td>


</tr>





<tr>
	<td class="item">
	Open file format
	</td>


	<td>
	No, .vfb is a proprietary, binary file format.
	</td>


	<td>
	Yes. UFO and GLIF formats are XML based, open and documented. You can build your own tools and use these formats.
	</td>


</tr>





<tr>
	<td class="item">
	Widgets, UI toolkit
	</td>


	<td>
	DialogKit, plus the set of basic windows from robofab.interface
	</td>


	<td>
	When run as a window-less user in OSX or linux the interface things are disabled. In some Python IDE's: the set of basic windows from robofab.interface. On OSX: Vanilla.
	</td>





</tr>



</table>

</p>


<h2>The UFO</h2>

<p>A UFO is not really a single file, but rather a whole folder full of stuff with a .ufo extension in the name. So you can open up a .ufo and have a look inside. Some data is stored in .plist format. This is a flavor of XML and contains kerning, lib and font info. The glyphs are stored level deeper, in the glyphs folder.
</p>

<img  id="smallforprint" src="talks/ufo.jpg" alt="UFO files and folders" width="515" height="368" />

<p>
The MyFont.ufo/glyphs/ folder contains a list of .glif files and a single contents.plist file. This is the table of contents for the folder, it contains a table of glyph name to file name mappings. So when you start working with a .ufo and you want a particular glyph, Robofab can find it faster.
</p>

<h2>The GLIF</h2>

<p>GLyph Interchange Format, a readable XML based file with all data for a single glyph: width, unicode value, all contours, points and components. The glyph.lib is also stored here.
</p>

<img  id="smallforprint" src="talks/cent.gif" alt="view of a glif" width="394" height="478" />

<p>
These screenshots are taken on an OSX machine, but the data is platform independent. Basically you can take any text editor and mess around with the points. While this is not a very efficient way to design type, it shows that the data is still there, accessible forever.
</p>

<h2>Exporting UFO</h2>
<p>
In the FontLab scripts folder that is distributed with Robofab, you will find a set of scripts for importing and exporting UFO and GLIF. Open a test font and run this script from the Macro menu. It will generate a .ufo in the same folder as the source font file.
</p>


<img  id="smallforprint" src="talks/exportmenu.gif" alt="export UFO menu" width="376" height="170" />

<p>
</p>


<!--
<h2>Using UFO</h2>

<p>
</p>

-->


<h2>FontLab Remote</h2>

<p>
If you happen to be using FontLab in mac, you can use the FontLab Remote module to make FontLab receive Python instructions and data by <strong>AppleEvents.</strong> You need to start the AppleEvent handler by importing the <strong>robofab.tools.remote</strong> module. After importing it, FontLab can receive instructions by AppleEvent. You need to call remote once after starting FontLab. Now external scripts running outside FontLab can call the FontLab application, send it glyphs, get results back.
</p>

<python><![CDATA[# start the AppleEvent handler
import robofab.tools.remote
]]></python>

<python type="output"><![CDATA[FontLabRemote is on.
]]></python>

<p>
The following script needs to be run in a python IDE. It will ask FontLab for its current glyph, and then it will store this glyph in a new font object outside FontLab.
</p>


	<pythonsource src="examples/fontLabRemote.py"/>



<python type="output"><![CDATA[
<RGlyph for None.parenright>
['parenright']
]]></python>


</xml>